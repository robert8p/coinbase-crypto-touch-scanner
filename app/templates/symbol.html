{% extends "base.html" %}
{% block content %}
<div class="bg-white rounded-xl shadow p-4">
  <div class="flex items-center justify-between">
    <div>
      <div class="text-sm text-slate-500">Product</div>
      <div class="text-2xl font-semibold font-mono">{{ product_id }}</div>
    </div>
    <a href="/" class="underline text-sm">Back</a>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
    <div>
      <div class="text-xs text-slate-500">P(+2% in 5h)</div>
      <div id="p2" class="text-2xl font-semibold">—</div>
    </div>
    <div>
      <div class="text-xs text-slate-500">P(+5% in 5h)</div>
      <div id="p5" class="text-2xl font-semibold">—</div>
    </div>
    <div>
      <div class="text-xs text-slate-500">P(+10% in 5h)</div>
      <div id="p10" class="text-2xl font-semibold">—</div>
    </div>
  </div>
</div>

<script>
async function load(){
  const r = await fetch(`/api/symbol/{{ product_id }}`);
  const j = await r.json();
  if(j.detail){ return; }
  document.getElementById('p2').textContent = (j.prob_2*100).toFixed(2)+'%';
  document.getElementById('p5').textContent = (j.prob_5*100).toFixed(2)+'%';
  document.getElementById('p10').textContent = (j.prob_10*100).toFixed(2)+'%';
}
load();
setInterval(load, 60000);
</script>
{% endblock %}
